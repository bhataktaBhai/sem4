\section{Myhill-Nerode Theorem} \label{sec:mn}
\lecture{2024-01-30}{}
We will see several %TODO: how to finish this sentence?
\begin{itemize}
    \item A language $L$ is regular iff a certain equivalence relation
    induced by $L$ (called $\equiv_L$) has a finite number of equivalence
    classes.
    \item Every language $L$ has a ``canonical'' deterministic automaton
    accepting it.
    Every other DA for $L$ is a ``refinement'' of this canonical DA.
    For regular languages, there is a unique DA for $L$ with the minimal
    number of states.
    \begin{remark}
        \emph{Every} language $L$ has a DA accepting it, the ``free'' DA for
        $L$, which has one state for each string over the alphabet.
    \end{remark}
\end{itemize}

% \begin{definition*}[Refinement] \label{def:mn:refinement}
%     Let $\mcA = (Q, s, \delta, F)$ be a deterministic automaton over an
%     alphabet $A$.
%     We say that \mcA' is a \emph{refinement} of \mcA\ if there exists a
%     $Q$-indexed partition $\set{Q'_p}_{p \in Q}$ of $Q'$ such that for all
%     $p, q \in Q$ and $a \in A$ such that $\delta(p, a) = q$, there exists a
%     $p' \in Q'_p$ and a $q' \in Q'_q$ such that $\delta'(p', a) = q'$.
% \end{definition*}

\begin{definition*}
    For any language $L \subseteq A^*$, we define the canonical equivalence
    relation $\equiv_L$ on $A^*$ as \[
        x \equiv_L y \iff
            \forall z \in A^*(xz \in L \longleftrightarrow yz \in L).
    \]
\end{definition*}

\begin{exercise}
    Describe the equivalence classes for $L = $ ``odd number of $a$'s''.
\end{exercise}
\begin{solution}
    $L$ and $L^c$.
\end{solution}

\begin{exercise}
    Describe precisely the equivalence classes of $\equiv_L$ for the
    language $L \subseteq \set{a, b}^*$ comprising strings in which the 2nd
    last letter is a $b$.
\end{exercise}
\begin{solution} \leavevmode
    \begin{itemize}
        \item $\epsilon + a + (.^*)aa$,
        \item $b + (.^*)ab$,
        \item $(.^*)ba$,
        \item $(.^*)bb$. \qedhere
    \end{itemize}
\end{solution}

\begin{exercise}
    Descrive the equivalence classes of $\equiv_L$ for the language
    $L = \set{a^nb^n \mid n \ge 0}$.
\end{exercise}
\begin{solution}
    $L$ is the disjoint union of
    $X = \bigsqcup_{0 \le m \le n} \set{a^nb^m}$ and $X^c$.
\end{solution}
